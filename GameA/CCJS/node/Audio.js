define(function(l,b){function k(a){var f=(new SFNode(" AudioClip{ }")).getChild(0);f&&(f.url[0]=fullpath(b.basePath+h.sound[a]),d[a]=f)}b.basePath="";var d={},h={},j,e,c,g;b.init=function(a,f){g=SFNode.get("lyinux->userscenegraphroot").children[0];b.basePath=a?a:"";h=f;b.cache();j=(new SFNode("DEF sound Sound {  spatialize FALSE  }")).getChild(0);e=(new SFNode("DEF music MovieTexture { asynchronism FALSE volume 1.0 }")).getChild(0);g.addChild(j);g.addChild(e)};b.openSound=function(a,b){d[a]||k(a);
j.source=d[a];d[a].startTime=Date.now();d[a].loop=b?b:!1;!1===b&&(d[a].stopTime=Date.now())};b.cache=function(){for(var a in h.sound)k(a)};b.playerMusic=function(a,f){f?(e.url[0]=b.basePath+h.music[a],e.volume=1,c&&(g.removeChild(c),c.setName(""),c=null)):(e.volume=0,c&&(g.removeChild(c),c.setName(""),c=null),c=(new SFNode("DEF sMusic MovieTexture {volume 1.0 }")).children[0],g.addChild(c),c.url[0]=b.basePath+h.music[a],c.loop=!1,c.startTime=Date.now());print("≤•∑≈“Ù¿÷"+e.url[0])};b.changeMusicVolume=
function(a){e.Volume=a};b.changeSoundVolume=function(a){for(var b in d)d[b].intensity=a};b.getMusicVolume=function(){return e.Volume};b.getSoundVolume=function(){return j.Volume};b.pauseMusic=function(a){e.pause=a};b.pauseSound=function(a,b){b?d[a].stopTime=Date.now():d[a].startTime=Date.now()}});
