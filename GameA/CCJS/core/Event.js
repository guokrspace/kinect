define(function(l,j){var h=function(a){this.name=a},g={},k=Array.prototype.slice;h.prototype={getEventBinds:function(a){this._callbacks||(this._callbacks={});return(this._callbacks[a]||(this._callbacks[a]=[])).length},bind:function(a,f,c){var b;"number"===typeof a&&(a+="");a=a.split(/\s+/);for(var d=this._callbacks||(this._callbacks={});b=a.shift();){b=d[b]||(d[b]={});var e=b.tail||(b.tail=b.next={});e.callback=f;e.context=c;b.tail=e.next={}}return this},unbind:function(a,f,c){var b,d,e;if(a){if(d=
this._callbacks){"number"===typeof a&&(a+="");for(a=a.split(/\s+/);b=a.shift();)if(e=d[b],delete d[b],f&&e)for(;(e=e.next)&&e.next;)e.callback===f&&(!c||e.context===c)||this.bind(b,e.callback,e.context)}}else delete this._callbacks;return this},trigger:function(a){var f,c,b,d;if(!(b=this._callbacks))return this;d=b.all;"number"===typeof a&&(a+="");for((a=a.split(/\s+/)).push(null);f=a.shift();)d&&a.push({next:d.next,tail:d.tail,event:f}),(c=b[f])&&a.push({next:c.next,tail:c.tail});for(d=k.call(arguments,
1);c=a.pop();){f=c.tail;for(b=c.event?[c.event].concat(d):d;(c=c.next)!==f;)c.callback.apply(c.context||this,b)}return this}};j.getInstance=function(a){g[a]||(g[a]=new h(a));return g[a]}});
