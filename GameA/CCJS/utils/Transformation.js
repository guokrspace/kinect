define(function(l,d){function e(a,b){var c=a.subtract(b);return new SFRotation(f.cross(c),Math.acos(c.dot(f)))}var f=new SFVec3f(0,0,-1),j=new SFVec3f(0,1,0),k=new SFVec3f,g=new SFRotation;new VrmlMatrix;d.getDirect=function(a,b,c){switch(c){case 1:a=b.subtract(a);b=j.cross(a);c=a.cross(b);mat=new VrmlMatrix(b.x,b.y,b.z,0,c.x,c.y,c.z,0,a.x,a.y,a.z,0,0,0,0,1);mat.getTransform(k,g);a=g;break;case 2:a=e(a,b);break;default:a=e(a,b)}return a};d.getRelativeTransformObject=function(a,b){var c={},h=new SFVec3f,
d=new SFRotation,e=a.getMatrix(),f=b.getMatrix().inverse();e.multRight(f).getTransform(h,d);c.translation=h;c.rotation=d;return c};d.getWorldTransformObject=function(a){var b={},c=new SFVec3f,d=new SFRotation;a.getMatrix().getTransform(c,d);b.translation=c;b.rotation=d;return b};d.getAngle=function(a,b,c){c?(c=a.x*b.x+a.y*b.y+a.z*b.z,a=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),b=Math.sqrt(b.x*b.x+b.y*b.y+b.z*b.z)):(c=a.dot(b),a=a.length(),b=b.length());return Math.acos(c/(a*b))}});
