define(function(c,g,j){var n=function(a){Array.prototype.slice.call(arguments,1).forEach(function(b){for(var d in b)void 0!==b[d]&&(a[d]=b[d])});return a},l=function(a){try{throw Error();}catch(b){return b.stack.split("\n")[a].replace(/^\s*/,"")}};g=function(a){n(m,a)};var p=function(a,b,d,k,e){try{var c=a[b],f;"number"===typeof c?a[b]=d.slerp(k,e):(f=d.slerp(k,e))&&c.setValue(f)}catch(h){throw print("--------,"+a[b],f,d.slerp,k,e),h;}},q=function(a){switch(Object.prototype.toString.call(a)){case "[object SFVec2f]":return new SFVec2f(a);
case "[object SFVec3f]":return new SFVec3f(a);case "[object SFRotation]":return new SFRotation(a);case "[object SFColor]":return new SFColor(a);default:return a}},r=c("core/Timer"),s=c("effects/Easing.js");Number.prototype.slerp=function(a,b){return this+(a-this)*b};SFVec3f.prototype.slerp=function(a,b){return this.add(a.subtract(this).multiply(b))};SFVec2f.prototype.slerp=function(a,b){return this.add(a.subtract(this).multiply(b))};SFColor.prototype.slerp=function(a,b){return new SFColor(this[0]+
(a[0]-this[0])*b,this[1]+(a[1]-this[1])*b,this[2]+(a[2]-this[2])*b)};c={};var m={};j&&j.exports?j.exports=c:this.Effect=c;g({animate:function(a,b,d,c){a=a&&"object"===typeof a&&a||{};b=b&&"number"===typeof b&&b||1;c=c&&"function"===typeof c&&c||null;var e=(d&&"string"===typeof d&&d||"BackEase|0").split("|");d=s.getEaser(e[0],e[1]&&+e[1]||0);var g=[],f,h;Array.prototype.slice.call(e,2).forEach(function(a,b){g[b+1]=+a});for(f in a)void 0===this[f]||null===this[f]||(e=q(this[f]),h=a[f],function(a,d,
c,e,f,g,h,j){r.bindFraction(b,function(b){h[0]=b;f(a,d,c,e,g.apply(null,h))},function(a){j&&j(a)})}(this,f,e,h,p,d,g,c));return this}});c.give=function(a,b){(!a||"object"!=typeof a||a.constructor!==SFNode)&&print("WARN by Effect: give 方法中 node 不是 SFNode类型。"+l(3));a._pre_value_=a._pre_value_||{};b&&b.split&&b.split("|").forEach(function(b){void 0!==a[b]&&print('WARN by Effect: give时该节点的域"'+b+'"已经存在。'+l(5));a[b]=m[b]||a[b]})};c.extendAbility=g});
