(function(root,undefined){var CC,define,currentMod=[],currentUri=[],mod,getScriptAbsoluteSrc,url,memoizedMods={},id2UriCache={},config={base:""},patchConfig=["extraSF","setTimeout","SFNode"],DEFAULT_BASE=root.fullpath(getSourceFromStacktrace(1).replace(/^.*\((.*\.js).*$/,"$1").replace(/[^\/\\]*\.js/,"")),toString=String.prototype.toString,print=root.print;root.include=root.include||{};root.fullpath=root.fullpath||{};root.CC=CC={};function Module(factory){this.factory=factory}Module.prototype={};root.define=
define=function(factory){var m2={factory:factory};mod=m2;var curi=currentUri[currentUri.length-1];currentMod.push(mod);memoizedMods[curi]=mod;initExports(mod,curi);currentUri.pop()};function getSourceFromStacktrace(i){try{throw new Error;}catch(e){return e.stack.split("\n")[i].replace(/^\s*/,"")}}function require(id,sourceLocate){sourceLocate=sourceLocate||3;var uri=id2Uri(id,dirname(getSourceFromStacktrace(sourceLocate).replace(/^.*(\s|\()(\w+:\/)/,"$2")),undefined);if(currentUri.indexOf(uri)!==
-1){print("WARN： by CCJS!!"+"\n 发现循环引用加载uri:"+uri+"!! return null;"+"\n 循环加载序列如下:\n"+currentUri.join("->\n")+"->\n"+uri+"\n 错误位置："+getSourceFromStacktrace(sourceLocate));return null}var mod=memoizedMods[uri];if(!mod){currentUri.push(uri);if(!root.include(uri)){print('WARN： by Seajs!!\n 加载JS模块失败!! return null;\n 失败原因：require("'+id+'")==>("'+uri+'")未找到 \n 错误位置：'+getSourceFromStacktrace(sourceLocate));currentUri.pop();return null}mod=currentMod.pop()}return mod.exports}CC.use=function(ids,callBack){var exports;
if(typeof ids==="string")exports=[require(ids,4)];else if(ids&&ids.forEach&&ids.map)exports=ids.map(function(id){return require(id,6)});if(typeof callBack==="function")callBack.apply(null,exports);return this};CC.config=function(o){var bp=o&&o.base?o.base:DEFAULT_BASE;for(var k in o){var sub=config[k];if(typeof sub==="object")mix(sub,o[k]);else{if(k==="patch")for(var i=0;i<o[k].length;i++){var p=bp+"/patch/"+o[k][i]+".js";include(p)}config[k]=o[k]}}if(o&&o.patch);else for(var j=0;j<patchConfig.length;j++){var p=
bp+"/patch/"+patchConfig[j]+".js";include(p)}return this};function mix(r,s){for(var k in s)r[k]=s[k]}function firstLoadModule(url){}function initExports(mod,uri){var ret;var factory=mod.factory;mod.id=uri;mod.exports={};delete mod.factory;if(!!(factory&&factory.constructor&&factory.call&&factory.apply)){ret=factory(require,mod.exports,mod);if(ret!==undefined)mod.exports=ret}else if(factory!==undefined)mod.exports=factory}function dirname(path){var s=path.match(/.*(?=\/.*$)/);return(s?s[0]:".")+"/"}
function realpath(path){path=path.replace(/([^:\/])\/+/g,"$1/");if(path.indexOf(".")===-1)return path;var old=path.split("/");var ret=[],part,i=0,len=old.length;for(;i<len;i++){part=old[i];if(part===".."){if(ret.length===0)print({message:"invalid path: "+path,type:"error"});ret.pop()}else if(part!==".")ret.push(part)}return ret.join("/")}function normalize(url){url=realpath(url);if(/#$/.test(url))url=url.slice(0,-1);else if(url.indexOf("?")===-1&&!/\.(?:css|js)$/.test(url))url+=".js";return url}function parseAlias(id){var alias=
config["alias"];var parts=id.split("/");var last=parts.length-1;parse(parts,0);if(last)parse(parts,last);function parse(parts,i){var part=parts[i];var m;if(alias&&alias.hasOwnProperty(part))parts[i]=alias[part];else if(m=part.match(/(.+):([\d\.]+)(-debug)?/))parts[i]=m[1]+"/"+m[2]+"/"+m[1]+(m[3]?m[3]:"")}return parts.join("/")}function getHost(url){return url.replace(/^(\w+:\/\/[^/]*)\/?.*$/,"$1")}function id2Uri(id,refUrl,noAlias){if(id2UriCache[id])return id;var ret;if(id.indexOf("://")!==-1||id.indexOf("/")===
0)ret=root.fullpath(id);else if(id.indexOf("./")===0||id.indexOf("../")===0)ret=root.fullpath(refUrl+id);else ret=root.fullpath(getConfigBase()+"/"+id);ret=normalize(ret);id2UriCache[ret]=true;return ret}function getConfigBase(){return config.base||DEFAULT_BASE}})(this,undefined);
